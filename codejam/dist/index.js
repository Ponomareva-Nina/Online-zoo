(()=>{"use strict";var e={885:(e,t,s)=>{e.exports=s.p+"./assets/images/src/assets/audio/click.mp3.mp3"}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,s),o.exports}s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{function e(e,t="",s=""){const i=document.createElement(e);return i.className=t,i.innerHTML=s,i}function t(e="",t="",s=""){const i=document.createElement("button");return i.className=t,i.innerHTML=e,i.value=s,i}class i{constructor(e=0,t=0){this.minutes=e,this.seconds=t,this.minBlock,this.secBlock,this.interval}createMinContainer(){const e=document.createElement("div");return this.minutes<=9?e.innerHTML=`0${this.minutes}`:e.innerHTML=this.minutes,this.minBlock=e,e}createSecContainer(){const e=document.createElement("div");return this.seconds<=9?e.innerHTML=`0${this.seconds}`:e.innerHTML=this.seconds,this.secBlock=e,e}clearTimer(){this.minBlock.innerHTML="00",this.secBlock.innerHTML="00",clearInterval(this.interval),this.minutes=0,this.seconds=0}countTime(){this.seconds++,this.seconds<=9?this.secBlock.innerHTML=`0${this.seconds}`:this.secBlock.innerHTML=this.seconds,this.seconds>59&&(this.minutes++,this.seconds=0,this.minBlock.innerHTML=this.minutes)}startTimer(){clearInterval(this.interval),this.interval=setInterval((()=>this.countTime()),1e3)}stopTimer(){clearInterval(this.interval),this.interval=null}getTime(){let e=this.getMinutes();e<=9&&(e=`0${e}`);let t=this.getSeconds();return t<=9&&(t=`0${t}`),`${e}:${t}`}getMinutes(){return this.minutes}getSeconds(){return this.seconds}}function n(e,t,s){const n=new i(e,t);s.innerHTML="Time:&nbsp;";const o=n.createSecContainer(),l=n.createMinContainer();return l.className="min-counter",s.append(l,o),n}const o=s(885),l=new Audio(o),r=document.createElement("button");class c{constructor(e,t=0){this.moves=t,this.movesCounter,this.fieldSize=e,this.tiles=[],this.successCombination=[]}createMovesCounter(){const e=document.createElement("div"),t=document.createElement("span");return e.innerText="Moves: ",this.movesCounter=t,t.innerHTML=this.moves,e.append(t),e}countMoves(){this.moves++,this.movesCounter.innerHTML=this.moves}getCount(){return this.moves}getTiles(){return this.tiles}getFieldSize(){return this.fieldSize}generateTiles(){for(let e=0;e<this.fieldSize*this.fieldSize;e++)0!==e&&this.successCombination.push(e),this.tiles.push({value:e,posLeft:e%this.fieldSize,posTop:(e-e%this.fieldSize)/this.fieldSize});this.successCombination.push(0)}randomizeTiles(){const e=[];for(let t=0;t<this.fieldSize*this.fieldSize;t++)e.push(t);if(e.sort((()=>Math.random()-.5)),this.fieldSize%2!=0){let t=0;for(let s=0;s<e.length;s++)for(let i=s;i<e.length;i++)e[s]>e[i]&&0!==e[s]&&0!==e[i]&&t++;if(t%2!=0)return this.randomizeTiles();for(let t=0;t<this.tiles.length;t++)this.tiles[t].value=e[t]}if(this.fieldSize%2==0){let t=0;for(let s=0;s<e.length;s++)for(let i=s;i<e.length;i++)e[s]>e[i]&&0!==e[s]&&0!==e[i]&&t++;if(t+=Math.floor(e.indexOf(0)/this.fieldSize),t%2==0)return this.randomizeTiles();for(let t=0;t<this.tiles.length;t++)this.tiles[t].value=e[t]}}renderField(e){e.innerHTML="";const t=Math.ceil(e.clientWidth/this.fieldSize);this.tiles.forEach((s=>{const i=document.createElement("div");0===s.value?i.className="tile empty-tile":(i.className="tile",i.innerHTML=s.value),i.style.width=`${t}px`,i.style.height=`${t}px`,i.style.top=s.posTop*t+"px",i.style.left=s.posLeft*t+"px",e.append(i),i.addEventListener("click",(()=>{this.moveTiles(i)}))}))}moveTiles(e){const t=document.querySelector(".empty-tile"),s=e,i=this.tiles.find((e=>e.value===Number(s.innerHTML))),n=this.tiles.find((e=>0===e.value));if(function(e,t){if(e.posTop===t.posTop&&1===Math.abs(e.posLeft-t.posLeft)||1===Math.abs(e.posTop-t.posTop)&&e.posLeft===t.posLeft)return!0}(i,n)){const e=t.style.top,o=t.style.left;n.value=i.value,i.value=0,t.style.top=s.style.top,t.style.left=s.style.left,s.style.top=e,s.style.left=o,this.countMoves(),r.classList.contains("audio_disabled")||l.play()}}isSolved(){let e=0;return this.tiles.forEach(((t,s)=>{t.value===Number(this.successCombination[s])&&e++})),this.tiles.length===e}}class a{constructor(e,t,s){this.size=e,this.moves=t,this.time=s}}const u=e("main","main"),d=e("div","field-container");d.insertAdjacentHTML("afterbegin",'<div class="welcome-text"><h2>Welcome to the gem puzzle!</h2> <p>The goal of the game is to place numbered tiles in order</p> <h3>Game controls:</h3><ol><li>To start a new game press NEW GAME</li><li>To save current game press SAVE</li><li>To continue saved game press CONTINUE</li><li>To see your top 10 results press BEST RESULTS</li></ol><h3>All combinations in this game are solvable</h3></div>');const m=function(){const e=document.createElement("header");e.className="header-container";const t=document.createElement("h1");return t.innerHTML="Fifteen Gem Puzzle",r.className="audio",e.append(t),e.append(r),r.addEventListener("click",(()=>{r.classList.toggle("audio_disabled")})),e}(),h=e("div","size-controls");let p;for(let e=3;e<=8;e++){const s=t(`${e}&times;${e}`,"size-btn",`${e}`);s.addEventListener("click",(()=>{return e=s,p.classList.remove("size-btn_checked"),e.classList.add("size-btn_checked"),p=e,void w(e.value);var e})),h.append(s),4===e&&(s.classList.add("size-btn_checked"),p=s)}const v=e("div","controls"),g=t("new game","btn start-btn"),f=t("save","btn save-btn"),T=t("continue","btn continue-btn"),S=t("best results","btn results-btn");v.append(g,f,T,S);const L=e("div","status-panel"),b=e("div","time-container","Time:&nbsp;");let M=n(0,0,b);const z=e("div","","Moves:&nbsp;0");L.append(z,b),u.append(m,v,L,d,h),document.body.append(u);let E=new c(p.value);const H=new class{constructor(){this.topResults=[]}addResult(e,t,s){const i=new a(e,t,s);if(this.topResults.length<10)this.topResults.push(i);else{const e=this.topResults[9];i.moves<e.moves&&(this.topResults[9]=i)}this.sortResults(),this.saveResultsToLocalStorage()}sortResults(){this.topResults.sort(((e,t)=>e.moves-t.moves))}saveResultsToLocalStorage(){const e=JSON.stringify(this.topResults);localStorage.setItem("topResults",e)}getResultsFromLocalStorage(){if(null!==localStorage.getItem("topResults")){const e=localStorage.getItem("topResults");this.topResults=JSON.parse(e)}}renderResults(t){this.topResults.forEach(((s,i)=>{const n=e("li","result"),o=document.createElement("div"),l=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div");o.innerHTML=i+1,l.innerHTML=s.size,r.innerHTML=s.moves,c.innerHTML=s.time,n.append(o,l,r,c),t.append(n)}))}};H.getResultsFromLocalStorage();const[y,k]=function(){const t=e("button","close-btn"),s=e("div","results-table close"),i=e("h2","table-title","Your best results:"),n=e("div","table-head"),o=e("div","","#"),l=e("div","","Field size"),r=e("div","","Moves"),c=e("div","","Time");n.append(o,l,r,c);const a=e("ul","results-list");return s.append(t,i,n,a),t.addEventListener("click",(()=>{a.innerHTML="",s.classList.remove("open")})),[s,a]}();function w(e){E=new c(e);const t=E.createMovesCounter();z.innerHTML="",z.append(t),E.generateTiles(),E.randomizeTiles(),E.renderField(d),M=n(0,0,b),M.startTimer(),d.addEventListener("click",C),window.addEventListener("resize",(()=>{E.renderField(d)}))}function C(){if(E.isSolved()){const t=E.getCount(),s=M.getTime();!function(){M.stopTimer();const e=M.getTime(),t=E.getCount(),s=`${E.getFieldSize()}&times;${E.getFieldSize()}`;H.addResult(s,t,e),d.removeEventListener("click",C)}(),function(t,s,i){const n=e("div","popup",`Hooray! You solved the puzzle in&nbsp;${s} and ${t}&nbsp;moves!`);i.append(n)}(t,s,d)}}u.append(y),g.addEventListener("click",(()=>w(p.value))),T.addEventListener("click",(()=>{const[e,t]=function(e,t,s){if(null!=localStorage.getItem("currentTilesPosition")&&0!==Number(localStorage.getItem("seconds"))){const i=localStorage.getItem("currentTilesPosition"),o=JSON.parse(i),l=localStorage.getItem("moves"),r=localStorage.getItem("fieldSize"),a=localStorage.getItem("minutes"),u=localStorage.getItem("seconds"),d=localStorage.getItem("winCombination"),m=JSON.parse(d);e.innerHTML="";const h=new c(r);h.moves=l,h.tiles=o,h.successCombination=m;const p=h.createMovesCounter();t.innerHTML="",t.append(p),h.renderField(e);const v=n(a,u,s);return v.startTimer(),[h,v]}alert("There is no saved game!")}(d,z,b);E=e,M=t,d.addEventListener("click",C)})),f.addEventListener("click",(()=>{!function(e,t){const s=e.getTiles(),i=JSON.stringify(s),n=e.getCount(),o=e.getFieldSize(),l=t.getMinutes(),r=t.getSeconds(),c=JSON.stringify(e.successCombination);localStorage.setItem("currentTilesPosition",i),localStorage.setItem("moves",n),localStorage.setItem("fieldSize",o),localStorage.setItem("minutes",l),localStorage.setItem("seconds",r),localStorage.setItem("winCombination",c)}(E,M)})),S.addEventListener("click",(()=>{H.renderResults(k),y.classList.add("open")}))})()})();