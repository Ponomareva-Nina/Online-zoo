(()=>{"use strict";var e={885:(e,t,n)=>{e.exports=n.p+"./assets/images/src/assets/audio/click.mp3.mp3"}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,n),r.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");s.length&&(e=s[s.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{class e{constructor(e,t,n=0){this.size=e,this.tiles=[],this.movesCounter=n,this.tileSize=t}getMoves(){return this.movesCounter}countMoves(){return this.movesCounter++,this.movesCounter}generateTiles(){for(let e=0;e<this.size*this.size;e++)this.tiles.push({value:e,left:e%this.size,top:(e-e%this.size)/this.size})}randomizeTiles(){let e=[];for(let t=0;t<this.size*this.size;t++)e.push(t);if(e.sort((()=>Math.random()-.5)),this.size%2!=0){let t=0;for(let n=0;n<e.length;n++)for(let s=n;s<e.length;s++)e[n]>e[s]&&0!==e[n]&&0!==e[s]&&t++;if(t%2!=0)return this.randomizeTiles();for(let t=0;t<this.tiles.length;t++)this.tiles[t].value=e[t]}if(this.size%2==0){let t=0;for(let n=0;n<e.length;n++)for(let s=n;s<e.length;s++)e[n]>e[s]&&0!==e[n]&&0!==e[s]&&t++;if(t+=Math.floor(e.indexOf(0)/this.size),t%2==0)return this.randomizeTiles();for(let t=0;t<this.tiles.length;t++)this.tiles[t].value=e[t]}}renderField(e){e.innerHTML="";for(let t of this.tiles){const n=document.createElement("div");0===t.value?n.className="tile empty-tile":(n.className="tile",n.innerHTML=t.value),n.style.width=`${this.tileSize}px`,n.style.height=`${this.tileSize}px`,n.style.top=t.top*this.tileSize+"px",n.style.left=t.left*this.tileSize+"px",e.append(n)}}}const t=n(885),s=new Audio(t),i=document.createElement("button");function r(e,t){let n=Number(e.style.width.slice(0,-2)),s=Number(e.style.top.slice(0,-2)),i=Number(e.style.left.slice(0,-2)),r=Number(t.style.top.slice(0,-2)),l=Number(t.style.left.slice(0,-2));return 0===Math.abs(s-r)&&Math.abs(i-l)===n||Math.abs(s-r)===n&&0===Math.abs(i-l)}function l(e){const t=document.querySelector(".empty-tile"),n=e.target;if(r(t,n)){let e=t.style.top,r=t.style.left;t.style.top=n.style.top,t.style.left=n.style.left,n.style.top=e,n.style.left=r,i.classList.contains("audio_disabled")||s.play()}}function o(e,t,n){const s=e.target,i=document.querySelector(".empty-tile");if(""!==s.innerHTML&&r(i,s)){let e=t.countMoves();n.innerHTML=e}}function c(e,t=""){const n=document.createElement("button");return n.innerHTML=e,n.className=t,n}class a{constructor(e=0,t=0,n,s){this.minutes=e,this.seconds=t,this.minBlock=n,this.secBlock=s,this.interval}clearTimer(){this.minBlock.innerHTML="00",this.secBlock.innerHTML="00",clearInterval(this.interval),this.minutes=0,this.seconds=0}countTime(){this.seconds++,this.seconds<=9?this.secBlock.innerHTML=`0${this.seconds}`:this.secBlock.innerHTML=this.seconds,this.seconds>59&&(this.minutes++,this.seconds=0,this.minBlock.innerHTML=this.minutes)}startTimer(){clearInterval(this.interval),this.interval=setInterval((()=>this.countTime()),1e3)}}const d=document.createElement("main"),m=document.createElement("div");m.className="field-container";const u=document.createElement("div");u.className="controls";const h=c("new game","btn start-btn"),p=c("save","btn save-btn"),g=c("continue","btn continue-btn"),f=c("best results","btn results-btn");u.append(h,p,g,f);const T=document.createElement("div");T.className="status-panel";const v=document.createElement("div");let b=document.createElement("span");b.innerHTML="0",v.innerText="Moves: ",v.append(b);const L=document.createElement("div");L.innerText="Time: ";let M=document.createElement("span"),y=document.createElement("span");y.className="min-counter",L.append(y,M),T.append(v,L);const z=document.createElement("div");z.className="size-controls";for(let e=3;e<=8;e++){let t=c(`${e}&times;${e}`,"size-btn");z.append(t),4===e&&t.classList.add("size-btn_checked")}function S(t,n){let s=Math.ceil(t.clientWidth/n);const i=new e(n,s);b.innerHTML=i.getMoves(),i.generateTiles(),i.randomizeTiles(),i.renderField(t),t.addEventListener("pointerdown",l),t.addEventListener("pointerdown",(e=>{o(e,i,b)})),window.addEventListener("resize",(()=>{let e=Math.ceil(t.clientWidth/n);i.tileSize=e,i.renderField(t)}))}window.onload=()=>{const t=function(){const e=document.createElement("header");e.className="header-container";const t=document.createElement("h1");return t.innerHTML="Fifteen Gem Puzzle",i.className="audio",e.append(t),e.append(i),i.addEventListener("click",(()=>{i.classList.toggle("audio_disabled")})),e}();document.body.prepend(t),document.body.append(d),d.append(u),d.append(T),d.append(m),d.append(z);let n=new a(0,0,y,M);n.clearTimer();const s=document.querySelectorAll(".size-btn");let r=document.querySelector(".size-btn_checked"),c=document.querySelector(".size-btn_checked").innerHTML.charAt(0);h.addEventListener("click",(()=>{S(m,c),n.clearTimer(),n.startTimer()}));for(let e of s)e.addEventListener("click",(()=>{r.classList.remove("size-btn_checked"),r=e,e.classList.add("size-btn_checked"),c=e.innerHTML.charAt(0),S(m,c),n.clearTimer(),n.startTimer()}));p.addEventListener("click",(()=>{!function(e,t,n,s,i){let r=function(e){const t={};for(let n=0;n<e.length;n++)t[n]=e[n].outerHTML;return t}(e),l=JSON.stringify(r);localStorage.setItem("currentGame",l),localStorage.setItem("moves",t),localStorage.setItem("min",n),localStorage.setItem("sec",s),localStorage.setItem("size",i)}(document.querySelectorAll(".tile"),b.innerText,y.innerHTML,M.innerHTML,document.querySelector(".size-btn_checked").innerHTML.charAt(0))})),g.addEventListener("click",(()=>{let t=Number(localStorage.getItem("min")),s=Number(localStorage.getItem("sec"));n.clearTimer(),y.innerHTML=localStorage.getItem("min"),M.innerHTML=localStorage.getItem("sec"),n=new a(t,s,y,M),n.startTimer(),function(t,n){if(null==localStorage.getItem("currentGame"))return;let s=localStorage.getItem("moves"),i=localStorage.getItem("size"),r=Math.ceil(t.clientWidth/i),c=new e(i,r,s);n.innerHTML=c.getMoves();let a=localStorage.getItem("currentGame"),d=JSON.parse(a),m=Object.keys(d).length;t.innerHTML="";for(let e=0;e<m;e++)t.insertAdjacentHTML("afterbegin",d[e]);t.addEventListener("pointerdown",l),t.addEventListener("pointerdown",(e=>{o(e,c,n)}))}(m,b)}))},m.insertAdjacentHTML("afterbegin",'<div class="welcome-text"><h2>Welcome to the gem puzzle!</h2> <p>The goal of the game is to place numbered tiles in order</p> <h3>Game controls:</h3><ol><li>To start a new game press NEW GAME</li><li>To save current game press SAVE</li><li>To continue saved game press CONTINUE</li><li>To see your top 10 results press BEST RESULTS</li></ol><h3>All combinations in this game are solvable</h3></div>')})()})();